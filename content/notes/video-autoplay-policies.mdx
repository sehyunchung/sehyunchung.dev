---
title: "Media autoplay policy"
createdAt: 2023-07-31
labels:
  - browser
  - media
  - pwa
---

- 어케어케 하다보니 여러 페이지에서 동영상을 동시에 재생시키는 뭔가를 만들어보고 있는데,
- 그러니까... `/control` 에서 `/video/1`, `/video/2`...의 재생 상태를 조작할 수 있어야 함.
- 리얼타임으로 각 페이지에 시그널 보내는 건 뭐 firebase/supabase의 리얼타임 기능을 쓰던지 하면 되는데,
- 동영상 재생이 트리거 되려면 사용자가 이벤트를 발생시켜야 된다는 브라우저 정책이 있고,
- `muted` 상태면 상관 없지만 사운드도 나와야 하는 상황이라 이거를 음... 클릭 이벤트를 트리거해야 되나? 그게 되나? 하다가
- 찾아보니 [크롬에선 *pwa로 설치되었을 경우*엔 허용을 해주고 있었다.](https://developer.chrome.com/blog/autoplay/#new-behaviors)
- 대응을 할 필요는 없는 상황이지만 사파리는? 하고 찾아보니 [뭐가 나와 있진 않았는데,](https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari/#3030251)
- Safari 17의 ['Add to Dock'](https://9to5mac.com/2023/06/07/safari-add-to-dock-macos-sonoma/) 기능으로 테스트해보니 일단 재생되는 것 까진 확인.
