{"id":"I_kwDOB4HiUc5noRP4","title":"ğŸ«  Hydration Mismatch ğŸ«  (1)","content":"ì´ëŸ° ì €ëŸ° ì´ìœ ë¡œ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœë¥¼ `localStorage` ë“±ì— persist í•˜ê³  ìˆì„ ê²½ìš° server/client mismatchê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ëŠ”ë° ê·¸ë˜ì„œ ì„œë²„ì—ì„œ í”„ë¦¬ë Œë”ê°€ ì•ˆë˜ê²Œ í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì€ ë‚œë¦¬ ë²•ì„ì´ í•„ìš”.\r\n\r\n1. `useState` + `useEffect`\r\n   ```tsx\r\n   function Comp() {\r\n     const storeState = useStoreState()\r\n           ^^^^^^^^^^ 1) ìš”ê±¸ ê·¸ëƒ¥ ì“°ë©´ ğŸ’£ ì¸ ê²½ìš°,\r\n\r\n     const [state, setState] = React.useState()\r\n     React.useEffect(()=>{\r\n       setState(storeState)\r\n     },[])               // 2) ì´ëŸ° ë‚œë¦¬ ë²•ì„ í›„ì—\r\n\r\n     return <div>{state}</div> // 3) ì´ëŸ¬ë©´ í†µê³¼\r\n   ```\r\n3. `useMounted` + `return null`\r\n   ```tsx\r\n   // 0) ì¼ë‹¨ ì´ëŸ° ë‚œë¦¬ ë²•ì„ì„ ë§Œë“¤ì–´ë‘ê³ \r\n   const useMounted = () => {\r\n     const [m, sM] = React.useState(false)\r\n     //     ^^^^^ ê·€ì°®ì•„ì„œ ëŒ€ì¶© ì”€\r\n     React.useEffect(()=>{\r\n       sM(true)\r\n     }, [])\r\n     return m\r\n   }\r\n   ```\r\n   ```tsx\r\n   function Comp() {\r\n     const storeState = useStoreState()\r\n           ^^^^^^^^^^ 1) ìš”ê±¸ ê·¸ëƒ¥ ì“°ë©´ ğŸ’£ ì¸ ê²½ìš°,\r\n\r\n     const mounted = useMounted()\r\n     if (!mounted) return null  // 2) ì´ëŸ¬ê³  ë‚˜ì„œ\r\n\r\n     return <div>{storeState}</div> // 3) ì´ëŸ¬ë©´ í†µê³¼\r\n   ```\r\n5. [`next/dynamic` + `{ ssr: false }`](https://nextjs.org/docs/app/building-your-application/optimizing/lazy-loading#skipping-ssr) â˜œ ì´ê²Œ ê¸°ë¶„ì´ ì œì¼ ëœ ë‚˜ìœë“¯\r\n   ```tsx\r\n   const Comp = dynamic(() => import('path/to/comp'), { ssr: false }); // ì ¤ ê°„ë‹¨?\r\n   ```\r\n   í•˜ì§€ë§Œ ìºì¹˜ê°€ í•˜ë‚˜ ìˆëŠ”ë°, `Comp` ëŠ” ë¬´ì¡°ê±´ `export default` ì—¬ì•¼ í•¨.\r\n   ```tsx\r\n   const Comp = dynamic(() => import('path/to/comp').then(mod => mod.Comp), { ssr: false })\r\n                                                       // ^^^^^^^^^^^^^^^ ì´ëŸ¬ë©´ ğŸ’£\r\n   ```\r\n   ëŒ€ì‹  `loading`ìœ¼ë¡œ ì„œìŠ¤íœìŠ¤ ê°„ì§€ë¥¼ ë‚¼ ìˆ˜ ìˆìŒ(...)\r\n   ```tsx\r\n   const Comp = dynamic(() => import('path/to/comp'), { ssr: false, loading: () => <Sekeleton /> }); // ì´ ê°€ëŠ¥\r\n   ```\r\n   ë¬¼ë¡  next í•œì •ì´ì§€ë§Œìš”...\r\n\r\n---\r\nì´ê±° ë‹¤ ë³„ë£¨ê³ ... ë¡œ ì‹œì‘í•˜ëŠ” ê¸€ì„ í•œì°¸ ì“°ê³  ìˆì—ˆëŠ”ë° ë¸Œë¼ìš°ì € êº¼ì ¸ì„œ ë‚ ì•„ê°...","createdAt":"2023-06-02T18:12:49Z","labels":["react","tips and tricks","next.js","ssr"]}